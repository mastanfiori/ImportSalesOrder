/*
 * Copyright (C) 2009-2022 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/m/Button","sap/ui/core/MessageType","sap/m/MessageBox","sap/m/MessageStrip","sap/m/Link","sap/m/ObjectStatus","sap/m/Column","sap/m/Label","sap/base/util/deepExtend","sap/ui/core/library","sap/ui/core/Fragment","sap/ui/core/Item","sap/ui/core/InvisibleMessage",],function(O,B,M,a,b,L,c,C,e,f,l,F,I,g){"use strict";var h=l.InvisibleMessageMode;return O.extend("cus.sd.salesorder.imports1.utils.utility",{oController:{},sMode:"",oTextJson:[],bReupload:false,constructor:function(o,m,r){sap.ui.base.Object.apply(this);this.oController=o;this.setUtilityMode(m);this.bReupload=r?true:false;},setUtilityMode:function(m){if(m){this.sMode=m;if(m==="Header"){this.sFieldPath="/headerFields";this.sDataPath="/salesHeaderData";this.sPriceField="/headerPrice";this.sPriceName="HEADER_PRICE.";this.sTextName="HEADER_TEXT";this.sTextPath="to_HeaderText";this.sTextPopoverId="headerTextPopover";this.sTextDescPath="/headerTextDesc";}else if(m==="Item"){this.sFieldPath="/itemFields";this.sDataPath="/salesItemData";this.sPriceField="/itemPrice";this.sPriceName="ITEM_PRICE.";this.sTextName="ITEM_TEXT";this.sTextPath="to_ItemText";this.sTextPopoverId="itemTextPopover";this.sTextDescPath="/itemTextDesc";}}},setController:function(o){this.oController=o;},_showPreviewTable:function(){this.oController.oUploadCollection.removeAllItems();this.oController.oUploadCollection.setVisible(false);this.oController.oPreviewTable.setVisible(true);},_hidePreviewTable:function(){this.oController.FileNameImport.setValue("");var m=sap.ui.getCore().byId(this.oController.sImportPageMessageStripId);if(m){m.destroy();}this.oController.oUIModel.setProperty("/uploadJobName","");this.oController.byId("importFileNameImport").setValueState("None");this.oController.byId("importFileNameImport").setValueStateText("");this.oController.oImportDataModel.setProperty("/salesItemData",[]);this.oController.oImportDataModel.setProperty("/salesHeaderData",[]);this.oController.ImportButton.setEnabled(false);this.oController.oUploadCollection.removeAllItems();this.oController.oUploadCollection.setVisible(true);this.oController.oPreviewTable.setVisible(false);this.oController.backToMasterPage();},clearTable:function(){this.oController.oPreviewTable.destroyColumns();this.oController.oColumnListItem.destroyCells();},_adjustFieldTextFormatter:function(d,p,n,t){var T=t.formatter.setFiledText;if(d==="Date"){T=t.formatter.setDateFiledText;}if(p&&n.match(/^HEADER_PRICE.*/)!==null){var i=n.split("__");if(i.length>0){var s=i[1];var j=i[2];j=j.toUpperCase();for(var k in p){if(s&&j&&p[k].PROPERTY&&p[k].SUBGROUPNAME===s&&j==="CONDITIONRATEVALUE"){var m=p[k].PROPERTY;if(m&&m==="RATIO"){T=t.formatter.formatRatio;}}}}}return T;},buildPreviewTable:function(s,S){this.clearTable();var u=this.oController.oUIModel.getProperty("/uploadedFiledList");var d=this.oController.oUIModel.getProperty(this.sFieldPath);if(s!==undefined){d=s;}var p=this.oController.oUIModel.getProperty(this.sPriceField);var i,o,j,P;var t=this.oController;for(i in d){var n=d[i];var v=true;var k="Low";var H="Begin";if(S!==undefined){v=(S.indexOf(n)>=0);}if(n===this.sTextName){var m=this.oController.oResourceBundle.getText("TEXT_OBEJCT_COLUMN_TITLE");var q=this.oController.oResourceBundle.getText("TEXT_OBEJCT_COLUMN_TITLE");q=q?q:m;o=this.createColumn(v,H,k,m,q);this.oController.oPreviewTable.addColumn(o);j=new c({active:{path:this.oController.sDataModelRootPath+this.sTextPath,formatter:t.formatter.setActiveForText},icon:{path:this.oController.sDataModelRootPath+this.sTextPath,formatter:t.formatter.setIconForText},state:{path:this.oController.sDataModelRootPath+this.sTextPath,formatter:t.formatter.setStatusForText},tooltip:this.oController.oResourceBundle.getText("TEXT_OBEJCT_COLUMN_TITLE")});j.attachPress(function(E){t.utility.handleTextCellPress(E,this.sMode);});}else{var T="String";var D="";if(n.indexOf("__")>=0){var G=n.split("__")[0];var r=n.split("__")[1];var w=n.split("__")[2];P=this.oController.oFiledList[w];for(var x in u){if(u[x].FIELDNAME===w&&u[x].SUBGROUPNAME===r&&u[x].GROUP===G){m=u[x].SAPLABEL;break;}}}else{P=this.oController.oFiledList[n];m=P?P["sap:label"]:n;if(n===this.oController.sKeyField){k='High';}}if(!P){continue;}T=P["type"];D=P["sap:display-format"];q=P["sap:quickinfo"]?P["sap:quickinfo"]:m;if(D!=="Date"){H=T&&T.indexOf("Decimal")>=0?"End":"Begin";}else{H="End";}o=this.createColumn(v,H,k,m,q);this.oController.oPreviewTable.addColumn(o);var y=this._adjustFieldTextFormatter(D,p,n,t);j=new c({text:{path:this.oController.sDataModelRootPath+n,formatter:y},icon:{path:this.oController.sDataModelRootPath+n,formatter:t.formatter.setIcon},state:{path:this.oController.sDataModelRootPath+n,formatter:t.formatter.setState}});}this.oController.oColumnListItem.addCell(j);v=H=k=m=q=undefined;}return this.oController.oColumnListItem;},createColumn:function(v,H,i,s,q){return new C({width:"auto",demandPopin:true,visible:v,hAlign:H,importance:i,popinDisplay:"Inline",header:new e({text:s,wrapping:true,tooltip:q})});},_handleTextTypeSelectChange:function(E){var o=E.getSource().getParent().getContent();var d=o[3];var t=o[5];var s=E.getSource();var j=s.getSelectedKey();var k=this.oTextJson[j].LongTextID;d.removeAllItems();var m;for(var i=0;i<this.oTextJson.length;i++){if(this.oTextJson[i].LongTextID===k){d.addItem(new I({key:i,text:this.oTextJson[i].Language}));if(!m){m=i;}}}d.setSelectedKey(m);t.setValue(this.oTextJson[m].LongText);},_handleLanguageSelectChange:function(E){var o=E.getSource().getParent().getContent();var d=o[3];var t=o[5];var s=d.getSelectedKey();t.setValue(this.oTextJson[s].LongText);},_setTextSelectLogic:function(p,m){var o=p.getContent()[0].getContent();var t=o[1];var d=o[3];var T=o[5];t.removeAllItems();d.removeAllItems();T.setValue("");var j=this.oController.oUIModel.getProperty(this.sTextDescPath);var u=[];for(var i=0;i<this.oTextJson.length;i++){var s=this.oTextJson[i].LongTextID;if(u.indexOf(s)===-1){var D=j[this.oTextJson[i].LongTextID];if(D){D=D+" "+"("+s+")";u.push(s);t.addItem(new I({key:i,text:D}));}else{u.push(s);t.addItem(new I({key:i,text:s}));}}}for(i=0;i<this.oTextJson.length;i++){if(this.oTextJson[i].LongTextID===this.oTextJson[0].LongTextID){d.addItem(new I({key:i,text:this.oTextJson[i].Language}));}}t.setSelectedKey(0);d.setSelectedKey(0);T.setValue(this.oTextJson[0].LongText);t.attachChange(this._handleTextTypeSelectChange,this);d.attachChange(this._handleLanguageSelectChange,this);},handleTextCellPress:function(E){var t=this;if(!this.bReupload){var i=E.getSource().getParent().getBindingContextPath("importSalesOrder");}else{i=E.getSource().getParent().getBindingContextPath("reuploadSalesDoc");}var v=this.oController.oPreviewView;var T=E.getSource();var m=this.oController.oImportDataModel.getProperty(this.sDataPath);var d=i.split("/")[2];this.oTextJson=m[d][this.sTextPath];if(!this.oController._pTextPopover){this.oController._pTextPopover=F.load({id:this.sTextPopoverId,name:"cus.sd.salesorder.imports1.view.fragment.TextObjectPopover",controller:this.oController}).then(function(p){v.addDependent(p);return p;});}this.oController._pTextPopover.then(function(p){t._setTextSelectLogic(p,t.sMode);p.openBy(T);});},processReturnData:function(u,r){var U=this.oController.oUIModel.getProperty("/uploadJobName");if(!this.bReupload){this.oController.FileNameImport.setValue(U);this.oController.onImportNameChange();}else{}this.storeUploadData(u);this.oController.buildTable();this.processP13nData(u.to_ImportHistItem);this.processUploadData(u.to_ImportHistItem);this.hideTableDetail();},storeUploadData:function(u){this.oController.oUploadData=f({},u);var d=this.oController.oUploadData.to_ImportHistItem;var k=[];var o={};var m={};if(d.length>0){for(var i in d){o=d[i].to_SalesOrder?d[i].to_SalesOrder:d[i].to_SalesDocumentImport;delete o["HIGHLIGHT"];if(d[i].to_SalesOrder!==undefined){k=d[i].to_SalesOrder.to_Item;}else if(d[i].to_SalesDocumentImport!==undefined){k=d[i].to_SalesDocumentImport.to_Item;}for(var j in k){m=k[j];delete m["ProductStandardID"];delete m["HIGHLIGHT"];}}}if(this.oController.oReuploadDataModel!==undefined){this.oController.oReuploadDataModel.setProperty("/reuploadData",f({},this.oController.oUploadData));}},processFieldList:function(d){if(d&&d.length>0){var u=d[0].textContent;try{var U=JSON.parse(u);}catch(k){return;}var m=0;var n=0;var o=U.UPLOADFIELDS.length;var p=[];for(var i=0;i<o;i++){if(U.UPLOADFIELDS[i].GROUP==="HEADER_TEXT"){if(m===0){U.UPLOADFIELDS[i].SUBGROUPNAME="";U.UPLOADFIELDS[i].FIELDNAME="TEXT";U.UPLOADFIELDS[i].LABEL="TEXT";U.UPLOADFIELDS[i].SAPLABEL="TEXT";m=1;}else{p.push(i);}}if(U.UPLOADFIELDS[i].GROUP==="ITEM_TEXT"){if(n===0){U.UPLOADFIELDS[i].SUBGROUPNAME="";U.UPLOADFIELDS[i].FIELDNAME="TEXT";U.UPLOADFIELDS[i].LABEL="TEXT";U.UPLOADFIELDS[i].SAPLABEL="TEXT";n=1;}else{p.push(i);}}}for(var j=p.length-1;j>=0;j--){U.UPLOADFIELDS.splice(p[j],1);}if(U!==undefined&&U!==null&&U!==""){if(U.UPLOADFIELDS!==undefined){var q=U.UPLOADFIELDS;this.oController.oUploadedFiledList=q;this.oController.oUIModel.setProperty("/uploadedFiledList",q);var H=[];var r=[];var P=[];var s=[];var A="";for(var t in q){switch(q[t].GROUP){case"HEADER":H.push(q[t].FIELDNAME);break;case"ITEM":r.push(q[t].FIELDNAME);break;case"HEADER_PRICE":A=q[t].GROUP+"__"+q[t].SUBGROUPNAME+"__"+q[t].FIELDNAME;H.push(A);P.push(A);break;case"ITEM_PRICE":A=q[t].GROUP+"__"+q[t].SUBGROUPNAME+"__"+q[t].FIELDNAME;r.push(A);s.push(A);break;case"HEADER_TEXT":H.push("HEADER_TEXT");break;case"ITEM_TEXT":r.push("ITEM_TEXT");break;}}this.oController.oUIModel.setProperty("/headerFields",H);this.oController.oUIModel.setProperty("/itemFields",r);this.oController.oUIModel.setProperty("/pricingElements",P);this.oController.oUIModel.setProperty("/itemPricingElements",s);}}}},splitFieldList:function(d){if(d&&d.length>0){var u=d[0].textContent;try{var U=JSON.parse(u);}catch(j){return;}var k=U.UPLOADFIELDS.length;var H={};var o={};var m=[];var n=[];for(var i=0;i<k;i++){if(U.UPLOADFIELDS[i].GROUP==="HEADER_TEXT"){H[U.UPLOADFIELDS[i].SUBGROUPNAME]=U.UPLOADFIELDS[i].SAPLABEL;}else if(U.UPLOADFIELDS[i].GROUP==="ITEM_TEXT"){o[U.UPLOADFIELDS[i].SUBGROUPNAME]=U.UPLOADFIELDS[i].SAPLABEL;}else if(U.UPLOADFIELDS[i].GROUP==="HEADER_PRICE"){m.push(U.UPLOADFIELDS[i]);}else if(U.UPLOADFIELDS[i].GROUP==="ITEM_PRICE"){n.push(U.UPLOADFIELDS[i]);}}this.oController.oUIModel.setProperty("/headerTextDesc",H);this.oController.oUIModel.setProperty("/itemTextDesc",o);this.oController.oUIModel.setProperty("/headerPrice",m);this.oController.oUIModel.setProperty("/itemPrice",n);}},processP13nData:function(i){var H=this.oController.oUIModel.getProperty("/headerFields");var d=this.oController.oUIModel.getProperty("/itemFields");var n="";var v=true;var p={};var s="";this.oController.oP13nColumns.headerColumns=[];this.oController.oP13nColumns.headerRuntimeColumns=[];for(var j in H){n=H[j];if(n==="HEADER_TEXT"){var G=n;var S="";var k="Text";s=this.oController.oResourceBundle.getText("TEXT_OBEJCT_COLUMN_TITLE");var o={};o.columnKey=n;o.text=s;this.oController.oP13nColumns.headerColumns.push(o);var m={};m.columnKey=n;m.visible=v;this.oController.oP13nColumns.headerRuntimeColumns.push(m);}else{if(n.indexOf("__")>=0){G=n.split("__")[0];S=n.split("__")[1];k=n.split("__")[2];p=this.oController.oFiledList[k];for(var q in this.oController.oUploadedFiledList){if(this.oController.oUploadedFiledList[q].FIELDNAME===k&&this.oController.oUploadedFiledList[q].SUBGROUPNAME===S&&this.oController.oUploadedFiledList[q].GROUP===G){p["sap:label"]=this.oController.oUploadedFiledList[q].SAPLABEL;break;}}}else{p=this.oController.oFiledList[n];}s=p["sap:label"];o={};o.columnKey=n;o.text=s;this.oController.oP13nColumns.headerColumns.push(o);m={};m.columnKey=n;m.visible=v;this.oController.oP13nColumns.headerRuntimeColumns.push(m);}}this.oController.oP13nModel.setProperty("/headerColumns",this.oController.oP13nColumns.headerColumns);this.oController.oP13nModel.setProperty("/headerRuntimeColumns",f([],this.oController.oP13nColumns.headerRuntimeColumns));var r=this.getAllItemsData(i);this.oController.oP13nColumns.itemColumns=[];this.oController.oP13nColumns.itemRuntimeColumns=[];for(var t in d){n=d[t];v=true;if(n==="ITEM_TEXT"){var u=n;var w="";var x="Text";s=this.oController.oResourceBundle.getText("TEXT_OBEJCT_COLUMN_TITLE");var y={};y.columnKey=n;y.text=s;this.oController.oP13nColumns.itemColumns.push(y);var z={};z.columnKey=n;z.visible=v;this.oController.oP13nColumns.itemRuntimeColumns.push(z);}else{if(n.indexOf("__")>=0){u=n.split("__")[0];w=n.split("__")[1];x=n.split("__")[2];p=this.oController.oFiledList[x];for(var A in this.oController.oUploadedFiledList){if(this.oController.oUploadedFiledList[A].FIELDNAME===x&&this.oController.oUploadedFiledList[A].SUBGROUPNAME===w&&this.oController.oUploadedFiledList[A].GROUP===u){p["sap:label"]=this.oController.oUploadedFiledList[A].SAPLABEL;break;}}}else{switch(n){case"MaterialByCustomer":v=this.detectMaterialByCustomer(r);p=this.oController.oFiledList[n];break;case"ProductStandardID":v=this.detectProductStandardID(r);p=this.oController.oFiledList[n];break;default:p=this.oController.oFiledList[n];}}s=p["sap:label"];y={};y.columnKey=n;y.text=s;y.index=t;this.oController.oP13nColumns.itemColumns.push(y);z={};z.columnKey=n;z.visible=v;this.oController.oP13nColumns.itemRuntimeColumns.push(z);}}this.oController.oP13nModel.setProperty("/itemColumns",this.oController.oP13nColumns.itemColumns);this.oController.oP13nModel.setProperty("/itemRuntimeColumns",f([],this.oController.oP13nColumns.itemRuntimeColumns));},getAllItemsData:function(i){var o=[];for(var d in i){if(i[d].to_SalesOrder!==undefined){for(var j in i[d].to_SalesOrder.to_Item){o.push(i[d].to_SalesOrder.to_Item[j]);}}else{for(var k in i[d].to_SalesDocumentImport.to_Item){o.push(i[d].to_SalesDocumentImport.to_Item[k]);}}}return o;},detectMaterialByCustomer:function(i){for(var d in i){if(i[d].MaterialByCustomer!==null&i[d].MaterialByCustomer!==undefined){return true;}}return false;},detectProductStandardID:function(i){for(var d in i){if(i[d].ProductStandardID!==null&i[d].ProductStandardID!==undefined){return true;}}return false;},processUploadData:function(d){if(!d||d.length<=0){var n=this.oController.oResourceBundle.getText("MSG_NO_SALES_ORDER");a.error(n);return;}var s=[];for(var i in d){if(d[i].to_SalesOrder!==undefined){d[i].to_SalesOrder["SalesDocumentTemporaryID"]=d[i].SalesDocumentTemporaryID;s.push(d[i].to_SalesOrder);}else if(d[i].to_SalesDocumentImport!==undefined){d[i].to_SalesDocumentImport["SalesDocumentTemporaryID"]=d[i].SalesDocumentTemporaryID;s.push(d[i].to_SalesDocumentImport);}}var p=this.oController.oUIModel.getProperty("/pricingElements");var j=this.oController.oUIModel.getProperty("/itemPricingElements");if(s.length>0){var m=M.Success;for(var k in s){var S=this.getStatus(s[k]);s[k].HIGHLIGHT=S;var u=false;if(u===false){if(S==="Error"){u=true;}else if(m===M.Success&&S==="Warning"){m=M.Warning;}}if(s[k].to_Partner&&s[k].to_Partner.length>0){var P=s[k].to_Partner;this.processPartnerData(P,s[k]);}if(s[k].to_PricingElement!==undefined&&s[k].to_PricingElement.length>0){var o=s[k].to_PricingElement;this.processPricingData(o,p,s[k]);}for(var q in s[k].to_Item){var r=s[k].to_Item[q].to_ScheduleLine;if(r!==undefined&&r.length>0){var t=r[0].RequestedDeliveryDate;s[k].to_Item[q].RequestedDeliveryDate=t;}if(s[k].to_Item[q].to_Partner&&s[k].to_Item[q].to_Partner.length>0){var v=s[k].to_Item[q].to_Partner;this.processPartnerData(v,s[k].to_Item[q],s[k]);}if(s[k].to_Item[q].to_PricingElement!==undefined&&s[k].to_Item[q].to_PricingElement.length>0){var w=s[k].to_Item[q].to_PricingElement;this.processPricingData(w,j,s[k].to_Item[q],s[k]);}}}this.oController.oUIModel.setProperty("/messageVisibility",true);this.oController.oImportDataModel.setProperty("/salesHeaderData",s);this._showPreviewTable();this.prepareForMessageStrip();}},processPartnerData:function(p,o,s){for(var j in p){if(p[j].PartnerFunction!==undefined&&this.oController.oPartnerFunctions.hasOwnProperty(p[j].PartnerFunction)){var d=this.oController.oPartnerFunctions[p[j].PartnerFunction];o[d]=p[j].Customer;}if(p[j].HIGHLIGHT!==undefined){o.HIGHLIGHT="Error";if(s){s.HIGHLIGHT="Error";}}}},processPricingData:function(p,P,o,s){for(var d in p){var i=p[d].ConditionType;for(var j in P){var k=P[j];var m=P[j].split("__")[1];var n=P[j].split("__")[2];if(m===i){o[k]=p[d][n];}}if(p[d].HIGHLIGHT!==undefined){o.HIGHLIGHT="Error";if(s){s.HIGHLIGHT="Error";}}}},prepareForMessageStrip:function(){if(!this.bReupload){var m="MESSAGE_SUCCESS";var s="MESSAGE_WARNING";var d="MESSAGE_ERROR";}else{m="REUPLOAD_MESSAGE_SUCCESS";s="REUPLOAD_MESSAGE_WARNING";d="REUPLOAD_MESSAGE_ERROR";}var i=this.oController.oMsgModel.getProperty("/messages").length;var j=this.oController.oMsgModel.getProperty("/messages");var t=M.Success;var T=this.oController.oResourceBundle.getText(m);this.oController.ImportButton.setEnabled(true);var k=0;for(k in j){if(j[k].TYPE===M.Warning){t=M.Warning;T=this.oController.oResourceBundle.getText(s,[i]);}if(j[k].TYPE===M.Error){t=M.Error;T=this.oController.oResourceBundle.getText(d,[i]);this.oController.ImportButton.setEnabled(false);break;}}var o=sap.ui.getCore().byId(this.oController.sImportPageMessageStripId);if(o){o.destroy();}this._generateMsgStrip(t,T);},_generateMsgStrip:function(t,T){if(!this.bReupload){var v=this.oController.byId("importPageVLayout1");}else{v=this.oController.byId("reuploadPageVLayout1");}this.oController.sMessageStripStatus=t;var m=new b(this.oController.sImportPageMessageStripId,{text:T,showCloseButton:false,showIcon:true,type:t});if(t!==M.Success){m.setLink(new L({text:this.oController.oResourceBundle.getText("MSG_STRIP_LINK")}).attachPress(this.handleShowMessagePress,this));}var s="";switch(t){case M.Information:s=this.oController.oResourceBundle.getText("INFORMATION");break;case M.Success:s=this.oController.oResourceBundle.getText("SUCCESS");break;case M.Warning:s=this.oController.oResourceBundle.getText("WARNING");break;case M.Error:s=this.oController.oResourceBundle.getText("ERROR");break;default:s="";}var i=g.getInstance();i.announce(s+" "+T,h.Assertive);v.addContent(m);},handleShowMessagePress:function(){var m=new sap.m.MessageItem({type:"{TYPE}",title:"{TITLE}",subtitle:"{SUBTITLE}",description:"{DESCRIPTION}"});var o=new sap.m.MessageView({showDetailsPageHeader:false,itemSelect:function(){d.setVisible(true);},items:{path:"/messages",template:m}});var d=new B({icon:"sap-icon://nav-back",visible:false,press:function(){o.navigateBack();this.setVisible(false);}});var j=[];j=o;var t=this.oController.oResourceBundle.getText("MSG_STRIP_WARNING_TITLE");var s="Warning";var k=this.oController.oMsgModel.getProperty("/messages");for(var i=0;i<this.oController.oMsgModel.getProperty("/messages").length;i++){if(k[i].TYPE===M.Error){t=this.oController.oResourceBundle.getText("MSG_STRIP_ERROR_TITLE");s="Error";break;}}var n=new sap.m.Dialog({title:t,state:s,content:j,customHeader:new sap.m.Bar({contentLeft:[d,new sap.m.Title({text:t})]}),beginButton:new sap.m.Button({press:function(){n.close();},text:this.oController.oResourceBundle.getText("CLOSE")}),afterClose:function(){n.destroy();m.destroy();o.destroy();},contentHeight:"440px",contentWidth:"640px",verticalScrolling:false,draggable:true,resizable:true});n.setModel(this.oController.oMsgModel);n.open();},setMessageDetailsView:function(m){if(this.oController.oMsgModel.getProperty("/messages").length!==0){this.oController.oMsgModel.setProperty("/msgStripLinkText",this.oController.oResourceBundle.getText("MSG_STRIP_LINK"));}else{this.oController.oMsgModel.setProperty("/msgStripLinkText","");}},parseMessageContent:function(m){try{var d=JSON.parse(m).MESSAGES;}catch(i){this.oController.oMsgModel.setProperty("/messages",[]);return;}this.oController.oMsgModel.setProperty("/messages",d);},getStatus:function(s){if(!s.hasOwnProperty('HIGHLIGHT')){if(s.to_Item.length>0){for(var i in s.to_Item){if(s.to_Item[i].hasOwnProperty('HIGHLIGHT')){return s.to_Item[i].HIGHLIGHT;}}}}else{return s.HIGHLIGHT;}return"None";},showTableDetail:function(){this.oController.oDetailButton.setText(this.oController.oResourceBundle.getText("BUTTON_HIDE_DETAIL"));this.oController.oPreviewTable.setHiddenInPopin([]);},hideTableDetail:function(){this.oController.oDetailButton.setText(this.oController.oResourceBundle.getText("BUTTON_SHOW_DETAIL"));this.oController.oPreviewTable.setHiddenInPopin(["Low"]);},processNameByDate:function(u){var D=new Date();var y=D.getFullYear();var m=D.getMonth()+1;var d=D.getDate();var t=y+":"+(m<10?"0"+m:m)+":"+(d<10?"0"+d:d)+":"+D.toTimeString().substr(0,8);t=t.replace(/:/g,"");var s=u.substring(0,u.lastIndexOf("."));var n=s+"_"+t;return n.substr(0,100);},processFileName:function(s){if(s){var u=s.substring(0,s.lastIndexOf("."));return u.substr(0,100);}return"";},isCorrectUpload:function(E){return E.getParameter("id").indexOf("reupload")===-1?false:true;}});});
